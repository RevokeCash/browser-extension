/* Google Ads Screen */

.ad-label {
  position: absolute;
  top: 14px;
  right: 14px;
  padding: 2px 6px;
  background: rgba(253, 185, 81, 0.16);
  border: 1px solid rgba(253, 185, 81, 0.28);
  border-radius: 6px;
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--accent-orange);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.search-title {
  font-size: 16px;
  font-weight: 600;
  color: #4a9eff;
  margin-bottom: 4px;
}

.search-domain {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.search-desc {
  font-size: 13px;
  line-height: 1.4;
  color: var(--text-secondary);
}

/* Base result style */
[data-step='google-ads'] .search-result {
  display: block;
  background: #0e0e0f;
  /* border: 1px solid rgba(255, 255, 255, 0.08); */
  border-radius: 10px;
  padding: 12px 14px;
  margin-bottom: 10px;
  color: #fff;
}

/* Organic (safe) result */
[data-step='google-ads'] .search-result:not(.ad) {
  opacity: 1;
  background: #111315;
  border-color: rgba(255, 255, 255, 0.1);
}

/* Sponsored ad (normal) — dim and subtle border */
[data-step='google-ads'] .search-result.ad {
  border-color: rgba(255, 255, 255, 0.05);
}

/* Sponsored + malicious ad — red warning border & glow */
[data-step='google-ads'] .search-result.ad.malicious {
  border-color: rgba(255, 80, 80, 0.65);
  border: 1px solid rgba(255, 255, 255, 0.08);

  box-shadow: 0 0 8px rgba(255, 80, 80, 0.25);
  background: rgba(255, 50, 50, 0.06);
}

/* Ad label */
[data-step='google-ads'] .ad-label {
  display: inline-block;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.06em;
  color: #111;
  background: #ffd36b;
  padding: 1px 6px;
  border-radius: 999px;
  margin-bottom: 6px;
}

/* Text colors */
[data-step='google-ads'] .search-title {
  color: #fff;
  font-weight: 600;
  margin-bottom: 2px;
}

[data-step='google-ads'] .search-domain {
  color: #9ad2ff;
  font-size: 13px;
  margin-bottom: 4px;
}

[data-step='google-ads'] .search-desc {
  color: #cfd3d7;
  font-size: 13px;
}

/* --- ad-by-ad entrance animation --- */

[data-step='google-ads'].show .search-result {
  animation: adEnter 2s;
}

[data-step='google-ads'].sequence-v2 {
  --trap-dur: 0.85s;
  --gap-1: 0.25s; /* pause after TRAP */
  --results-dur: 0.55s;
  --row-stagger: 0.12s;
  --gap-2: 0.4s; /* pause before PROTECTION */
  --protect-dur: 0.6s;
}

/* 0) Neutralize ONLY what we re-animate (no !important) */
[data-step='google-ads'].sequence-v2 .panel-right .info-block,
[data-step='google-ads'].sequence-v2 .search-result {
  opacity: 0;
  animation: none;
  transform: translateY(8px);
  filter: none;
}

/* prevent flash before kickoff */
[data-step='google-ads'].sequence-v2:not(.ready) .panel-right .info-block,
[data-step='google-ads'].sequence-v2:not(.ready) .search-result {
  visibility: hidden;
}
[data-step='google-ads'].sequence-v2.ready .panel-right .info-block,
[data-step='google-ads'].sequence-v2.ready .search-result {
  visibility: visible;
}

/* 1) THE TRAP (first right info-block) */
[data-step='google-ads'].sequence-v2.ready .panel-right .panel-right-content .info-block:nth-child(1) {
  animation: gaRise var(--trap-dur) ease-out forwards;
}

/* 2) Left search results: staggered entrance */
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result {
  animation: gaRise var(--results-dur) cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(1) {
  animation-delay: calc(var(--trap-dur) + var(--gap-1));
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(2) {
  animation-delay: calc(var(--trap-dur) + var(--gap-1) + var(--row-stagger) * 1);
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(3) {
  animation-delay: calc(var(--trap-dur) + var(--gap-1) + var(--row-stagger) * 2);
}

/* 2b) Show the AD pill a beat after each card appears */
[data-step='google-ads'].sequence-v2 .search-result {
  position: relative;
}
[data-step='google-ads'].sequence-v2 .search-result .ad-label {
  position: absolute;
  top: 10px;
  right: 10px;
  opacity: 0;
  transition: opacity 0.25s ease;
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(1) .ad-label {
  transition-delay: calc(var(--trap-dur) + var(--gap-1) + 0.15s);
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(2) .ad-label {
  transition-delay: calc(var(--trap-dur) + var(--gap-1) + var(--row-stagger) * 1 + 0.15s);
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result:nth-of-type(3) .ad-label {
  transition-delay: calc(var(--trap-dur) + var(--gap-1) + var(--row-stagger) * 2 + 0.15s);
}
[data-step='google-ads'].sequence-v2.ready .panel-left .search-result .ad-label {
  opacity: 1;
}

/* 3) YOUR PROTECTION (second right info-block) */
[data-step='google-ads'].sequence-v2.ready .panel-right .panel-right-content .info-block:nth-child(2) {
  animation: gaRise var(--protect-dur) ease-out
    calc(var(--trap-dur) + var(--gap-1) + var(--row-stagger) * 2 + var(--results-dur) + var(--gap-2)) forwards;
}

/* Keyframes */
@keyframes gaRise {
  from {
    opacity: 0;
    transform: translateY(10px);
    filter: saturate(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: saturate(1);
  }
}

/* --- Phase-controlled malicious styling --- */
/* 1) Initially keep malicious ads neutral (same as normal .ad) */
[data-step='google-ads'] .search-result.ad.malicious {
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: none;
  background: #0e0e0f;
  transition:
    border-color 300ms ease,
    box-shadow 300ms ease,
    background-color 300ms ease;
}

/* 2) When phase 3 starts, flip them to red */
[data-step='google-ads'].phase-3 .search-result.ad.malicious {
  border-color: rgba(255, 80, 80, 0.65);
  box-shadow: 0 0 8px rgba(255, 80, 80, 0.25);
  background: rgba(255, 50, 50, 0.06);
}

/* --- UNIFY INITIAL AD LOOK + SUPPRESS EARLY BADGE --- */

/* 1) NEVER show the AD pill before phase-3 (override section 2b) */
[data-step='google-ads'] .search-result .ad-label {
  opacity: 0; /* default hidden */
  transition: opacity 0.25s ease;
}

/* If "ready" has already set badges to 1, force them back off until phase-3 */
[data-step='google-ads'].sequence-v2.ready:not(.phase-3) .panel-left .search-result .ad-label {
  opacity: 0 !important;
  transition-delay: 0s !important; /* kill the stagger */
}

/* --- PHASE 3: REVEAL BADGES ON ALL ADS + TURN MALICIOUS RED --- */

/* a) show AD badge on ALL ads at the exact phase-3 moment */
[data-step='google-ads'].sequence-v2.phase-3 .panel-left .search-result.ad .ad-label {
  opacity: 1;
  transition-delay: 0s;
}

/* b) only malicious ads flip red in phase-3 */
[data-step='google-ads'].phase-3 .search-result.ad.malicious {
  border-color: rgba(255, 80, 80, 0.65);
  box-shadow: 0 0 8px rgba(255, 80, 80, 0.25);
  background: rgba(255, 50, 50, 0.06);
}
